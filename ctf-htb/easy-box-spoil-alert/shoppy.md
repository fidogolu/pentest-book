# Shoppy

## Recon

1. Update the host file in Kali
2. Port scanning

<figure><img src="../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

3\. Visit the web application

<figure><img src="../../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption></figcaption></figure>

4\. Brute force directories and files

<figure><img src="../../.gitbook/assets/image (1) (2).png" alt=""><figcaption></figcaption></figure>

5\. Bruteforce virtualhost

<figure><img src="../../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption></figcaption></figure>

## Exploit

6\. Bypass login authentication

Use repeater module with burp suite (most simple)

Classic request :&#x20;

<figure><img src="../../.gitbook/assets/image (2) (1) (2).png" alt=""><figcaption></figcaption></figure>

Basic SQL payload injection does not work.

Probably NoSQL ?

<figure><img src="../../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

MongoDB NoSQL payload works !

<figure><img src="../../.gitbook/assets/image (5) (1) (1).png" alt=""><figcaption></figcaption></figure>

Replay the same payload in the "search" field, a file is available for download :&#x20;

<figure><img src="../../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

We have hashes in this file :&#x20;

```
_id "62db0e93d6d6a999a66ee67a" 
username "admin"
password "23c6877d9e2b564ef8b32c3a23de27b2" 

_id "62db0e93d6d6a999a66ee67b"
username "josh"
password "6ebcea65320589ca4f2f1ce039975995" 
```

7\. Crack the hashes

Identify the type of the hash :&#x20;

<figure><img src="../../.gitbook/assets/image (4) (1).png" alt=""><figcaption></figcaption></figure>

Crack the hashes with john the ripper :&#x20;

<figure><img src="../../.gitbook/assets/image (3) (1).png" alt=""><figcaption></figcaption></figure>

8\. Use this new credential in the mattermost web application, and explore they channels :&#x20;

<figure><img src="../../.gitbook/assets/image (2) (2).png" alt=""><figcaption></figcaption></figure>

## Gain Access & user flag



9\. Connect to the ssh & capture the user flag :&#x20;

<figure><img src="../../.gitbook/assets/image (4) (2).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

## Privilege Escalation & root flag

10\. Use "password-manager" program for display "deploy" credential account :&#x20;

<figure><img src="../../.gitbook/assets/image (3) (2).png" alt=""><figcaption></figcaption></figure>

11\. Connect to ssh with "deploy" account & GTFOBins docker command to pass "root" :&#x20;

<figure><img src="../../.gitbook/assets/image (5) (1).png" alt=""><figcaption></figcaption></figure>

12\. Capture the root flag :&#x20;

<figure><img src="../../.gitbook/assets/image (1) (3) (1).png" alt=""><figcaption></figcaption></figure>
